{"version":3,"file":"js/app_profile.385bd1c0.js","mappings":"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","sources":["webpack://jdrave-app/./src/services/users/UpdateUser.mutation.gql","webpack://jdrave-app/./src/views/ProfileView.vue?f405","webpack://jdrave-app/./src/views/ProfileView.vue"],"sourcesContent":["\n    var doc = {\"kind\":\"Document\",\"definitions\":[{\"kind\":\"OperationDefinition\",\"operation\":\"mutation\",\"name\":{\"kind\":\"Name\",\"value\":\"UpdateUser\"},\"variableDefinitions\":[{\"kind\":\"VariableDefinition\",\"variable\":{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"id\"}},\"type\":{\"kind\":\"NonNullType\",\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"String\"}}},\"directives\":[]},{\"kind\":\"VariableDefinition\",\"variable\":{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"username\"}},\"type\":{\"kind\":\"NonNullType\",\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"String\"}}},\"directives\":[]}],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"update_users_by_pk\"},\"arguments\":[{\"kind\":\"Argument\",\"name\":{\"kind\":\"Name\",\"value\":\"pk_columns\"},\"value\":{\"kind\":\"ObjectValue\",\"fields\":[{\"kind\":\"ObjectField\",\"name\":{\"kind\":\"Name\",\"value\":\"id\"},\"value\":{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"id\"}}}]}},{\"kind\":\"Argument\",\"name\":{\"kind\":\"Name\",\"value\":\"_set\"},\"value\":{\"kind\":\"ObjectValue\",\"fields\":[{\"kind\":\"ObjectField\",\"name\":{\"kind\":\"Name\",\"value\":\"username\"},\"value\":{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"username\"}}}]}}],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"id\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"username\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"email\"},\"arguments\":[],\"directives\":[]}]}}]}}],\"loc\":{\"start\":0,\"end\":170}};\n    doc.loc.source = {\"body\":\"mutation UpdateUser($id: String!, $username: String!) {\\n  update_users_by_pk(pk_columns: { id: $id }, _set: { username: $username }) {\\n    id\\n    username\\n    email\\n  }\\n}\",\"name\":\"GraphQL request\",\"locationOffset\":{\"line\":1,\"column\":1}};\n  \n\n    var names = {};\n    function unique(defs) {\n      return defs.filter(\n        function(def) {\n          if (def.kind !== 'FragmentDefinition') return true;\n          var name = def.name.value\n          if (names[name]) {\n            return false;\n          } else {\n            names[name] = true;\n            return true;\n          }\n        }\n      )\n    }\n  \n\n    // Collect any fragment/type references from a node, adding them to the refs Set\n    function collectFragmentReferences(node, refs) {\n      if (node.kind === \"FragmentSpread\") {\n        refs.add(node.name.value);\n      } else if (node.kind === \"VariableDefinition\") {\n        var type = node.type;\n        if (type.kind === \"NamedType\") {\n          refs.add(type.name.value);\n        }\n      }\n\n      if (node.selectionSet) {\n        node.selectionSet.selections.forEach(function(selection) {\n          collectFragmentReferences(selection, refs);\n        });\n      }\n\n      if (node.variableDefinitions) {\n        node.variableDefinitions.forEach(function(def) {\n          collectFragmentReferences(def, refs);\n        });\n      }\n\n      if (node.definitions) {\n        node.definitions.forEach(function(def) {\n          collectFragmentReferences(def, refs);\n        });\n      }\n    }\n\n    var definitionRefs = {};\n    (function extractReferences() {\n      doc.definitions.forEach(function(def) {\n        if (def.name) {\n          var refs = new Set();\n          collectFragmentReferences(def, refs);\n          definitionRefs[def.name.value] = refs;\n        }\n      });\n    })();\n\n    function findOperation(doc, name) {\n      for (var i = 0; i < doc.definitions.length; i++) {\n        var element = doc.definitions[i];\n        if (element.name && element.name.value == name) {\n          return element;\n        }\n      }\n    }\n\n    function oneQuery(doc, operationName) {\n      // Copy the DocumentNode, but clear out the definitions\n      var newDoc = {\n        kind: doc.kind,\n        definitions: [findOperation(doc, operationName)]\n      };\n      if (doc.hasOwnProperty(\"loc\")) {\n        newDoc.loc = doc.loc;\n      }\n\n      // Now, for the operation we're running, find any fragments referenced by\n      // it or the fragments it references\n      var opRefs = definitionRefs[operationName] || new Set();\n      var allRefs = new Set();\n      var newRefs = new Set();\n\n      // IE 11 doesn't support \"new Set(iterable)\", so we add the members of opRefs to newRefs one by one\n      opRefs.forEach(function(refName) {\n        newRefs.add(refName);\n      });\n\n      while (newRefs.size > 0) {\n        var prevRefs = newRefs;\n        newRefs = new Set();\n\n        prevRefs.forEach(function(refName) {\n          if (!allRefs.has(refName)) {\n            allRefs.add(refName);\n            var childRefs = definitionRefs[refName] || new Set();\n            childRefs.forEach(function(childRef) {\n              newRefs.add(childRef);\n            });\n          }\n        });\n      }\n\n      allRefs.forEach(function(refName) {\n        var op = findOperation(doc, refName);\n        if (op) {\n          newDoc.definitions.push(op);\n        }\n      });\n\n      return newDoc;\n    }\n    \n    module.exports = doc;\n    \n        module.exports[\"UpdateUser\"] = oneQuery(doc, \"UpdateUser\");\n        \n","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, unref as _unref, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, Fragment as _Fragment } from \"vue\"\n\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"h1\", { class: \"page-title mb-8\" }, [\n  /*#__PURE__*/_createTextVNode(\"Éditer le \"),\n  /*#__PURE__*/_createElementVNode(\"span\", null, \"profil\")\n], -1)\nconst _hoisted_2 = { class: \"max-w-lg mx-auto\" }\nconst _hoisted_3 = { key: 0 }\nconst _hoisted_4 = {\n  key: 1,\n  class: \"mb-6\"\n}\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"div\", null, \"stats?\", -1)\n\nimport { useMutation, useQuery } from '@vue/apollo-composable';\nimport GetCurrentUser from '@/services/users/GetCurrentUser.query.gql';\nimport UpdateUser from '@/services/users/UpdateUser.mutation.gql';\nimport IUserQuery from '@/types/services/UserQuery.interface';\nimport { ref, watchEffect } from 'vue';\nimport IUser from '@/types/User.interface';\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'ProfileView',\n  setup(__props) {\n\nconst { result, loading, refetch } = useQuery<IUserQuery>(GetCurrentUser);\n\nconst user = ref<IUser | null>(null);\n\nwatchEffect(() => {\n  if (result.value) {\n    user.value = { ...result.value?.current_user[0] };\n  }\n});\n\nconst {\n  mutate: updateUser,\n  loading: isUpdating,\n  onDone: updateCache,\n} = useMutation(UpdateUser, () => ({\n  variables: {\n    id: user.value?.id,\n    username: user.value?.username,\n  },\n}));\n\nupdateCache(() => {\n  refetch();\n});\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_BaseInput = _resolveComponent(\"BaseInput\")!\n  const _component_BaseButton = _resolveComponent(\"BaseButton\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _hoisted_1,\n    _createElementVNode(\"div\", _hoisted_2, [\n      (_unref(loading))\n        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, \"Chargement\"))\n        : _createCommentVNode(\"\", true),\n      (!_unref(loading) && user.value)\n        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n            _createVNode(_component_BaseInput, {\n              class: \"mb-6\",\n              modelValue: user.value.username,\n              \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((user.value.username) = $event)),\n              label: \"Pseudo\"\n            }, null, 8, [\"modelValue\"]),\n            _createVNode(_component_BaseInput, {\n              class: \"mb-6\",\n              modelValue: user.value.email,\n              \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((user.value.email) = $event)),\n              label: \"Adresse mail\",\n              readonly: \"\"\n            }, null, 8, [\"modelValue\"]),\n            _createVNode(_component_BaseButton, {\n              class: \"primary circled\",\n              \"is-loading\": _unref(isUpdating),\n              onClick: _unref(updateUser)\n            }, {\n              default: _withCtx(() => [\n                _createTextVNode(\" Enregistrer \")\n              ]),\n              _: 1\n            }, 8, [\"is-loading\", \"onClick\"])\n          ]))\n        : _createCommentVNode(\"\", true),\n      _hoisted_5\n    ])\n  ], 64))\n}\n}\n\n})","import script from \"./ProfileView.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ProfileView.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["doc","loc","source","collectFragmentReferences","node","refs","kind","add","name","value","type","selectionSet","selections","forEach","selection","variableDefinitions","def","definitions","definitionRefs","findOperation","i","length","element","oneQuery","operationName","newDoc","hasOwnProperty","opRefs","Set","allRefs","newRefs","refName","size","prevRefs","has","childRefs","childRef","op","push","module","exports","_hoisted_1","_createElementVNode","class","_createTextVNode","_hoisted_2","_hoisted_3","key","_hoisted_4","_hoisted_5","_defineComponent","__name","setup","__props","result","loading","refetch","useQuery","GetCurrentUser","user","ref","watchEffect","current_user","mutate","updateUser","isUpdating","onDone","updateCache","useMutation","UpdateUser","variables","id","username","_ctx","_cache","_component_BaseInput","_resolveComponent","_component_BaseButton","_openBlock","_createElementBlock","_Fragment","_unref","_createCommentVNode","_createVNode","modelValue","$event","label","email","readonly","onClick","default","_withCtx","_","__exports__"],"sourceRoot":""}