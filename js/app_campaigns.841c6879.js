(self["webpackChunkjdrave_app"]=self["webpackChunkjdrave_app"]||[]).push([[811],{5802:function(e){var a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Games"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"dungeonMasterId"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},defaultValue:{kind:"NullValue"},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"status"}},type:{kind:"NamedType",name:{kind:"Name",value:"statuses_enum"}},defaultValue:{kind:"NullValue"},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"games"},arguments:[{kind:"Argument",name:{kind:"Name",value:"where"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"dungeon_master_id"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"_eq"},value:{kind:"Variable",name:{kind:"Name",value:"dungeonMasterId"}}}]}},{kind:"ObjectField",name:{kind:"Name",value:"status"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"_eq"},value:{kind:"Variable",name:{kind:"Name",value:"status"}}}]}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"created_at"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updated_at"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dungeon_master"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]}]}}]}},{kind:"Field",alias:{kind:"Name",value:"dungeon_masters"},name:{kind:"Name",value:"users"},arguments:[{kind:"Argument",name:{kind:"Name",value:"where"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"mastered_games_aggregate"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"count"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"predicate"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"_gte"},value:{kind:"IntValue",value:"1"}}]}}]}}]}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:427}};a.loc.source={body:"query Games ($dungeonMasterId: String = null, $status: statuses_enum = null) {\n  games(where: { dungeon_master_id: { _eq: $dungeonMasterId }, status: { _eq: $status } }) {\n    id\n    title\n    description\n    status\n    created_at\n    updated_at\n    dungeon_master {\n      id\n      username\n    }\n  }\n  dungeon_masters: users(where: { mastered_games_aggregate: { count: { predicate: {_gte: 1} } } }) {\n    id\n    username\n  }\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};function n(e,a){if("FragmentSpread"===e.kind)a.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&a.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){n(e,a)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){n(e,a)})),e.definitions&&e.definitions.forEach((function(e){n(e,a)}))}var i={};function t(e,a){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==a)return i}}function s(e,a){var n={kind:e.kind,definitions:[t(e,a)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var s=i[a]||new Set,l=new Set,d=new Set;s.forEach((function(e){d.add(e)}));while(d.size>0){var u=d;d=new Set,u.forEach((function(e){if(!l.has(e)){l.add(e);var a=i[e]||new Set;a.forEach((function(e){d.add(e)}))}}))}return l.forEach((function(a){var i=t(e,a);i&&n.definitions.push(i)})),n}(function(){a.definitions.forEach((function(e){if(e.name){var a=new Set;n(e,a),i[e.name.value]=a}}))})(),e.exports=a,e.exports.Games=s(a,"Games")},4628:function(e,a,n){"use strict";var i;n.d(a,{o:function(){return i}}),function(e){e["Draft"]="draft",e["Published"]="published",e["Archived"]="archived"}(i||(i={}))},3643:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return $}});var i=n(6252),t=n(3577),s=n(2262),l=n(2450),d=n(7102),u=n(5802),r=n.n(u),m=n(4628),o=n(9150);const c=e=>((0,i.dD)("data-v-30a9e80a"),e=e(),(0,i.Cn)(),e),v={class:"mb-5"},p={class:"font-bold text-2xl mb-4"},k={class:"flex justify-between items-center gap-x-2"},f={class:"flex gap-x-4"},g={class:"-mx-9"},_={class:"list bg-gray-100 text-gray-600 uppercase font-semibold text-sm"},h={class:""},b={class:""},w={class:""},N={class:""},V=c((()=>(0,i._)("span",{class:""},null,-1))),S={class:"font-semibold"},F={class:"text-sm text-dark-light truncate"},j={class:"ml-auto"};var O=(0,i.aZ)({__name:"CampaignsList",setup(e){const{t:a}=(0,o.QT)(),n=(0,s.iH)(""),u=(0,s.iH)({dungeonMasterId:null,status:null}),c=(0,s.iH)({dungeonMasters:{},statuses:Object.entries(m.o).sort(((e,a)=>e[0].localeCompare(a[0]))).reduce(((e,[n,i])=>(e[i]=a(`common.statuses.${i}`),e)),{})}),{result:O,onResult:x}=(0,d.aM)(r(),u.value),y=(0,i.Fl)((()=>O.value?.games??[]));return x((({data:e})=>{c.value.dungeonMasters=[...e.dungeon_masters].sort(((e,a)=>e.username.localeCompare(a.username))).reduce(((e,a)=>(e[a.id]=a.username,e)),{})})),(e,a)=>{const d=(0,i.up)("BaseInput"),r=(0,i.up)("BaseDropdown"),m=(0,i.up)("BaseBadge"),o=(0,i.up)("BaseButton");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("header",v,[(0,i._)("h1",p,(0,t.zw)(e.$t("app.campaigns_list.title")),1),(0,i._)("div",k,[(0,i.Wm)(d,{class:"w-full max-w-[400px]",type:"text",placeholder:e.$t("app.campaigns_list.search_placeholder"),modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=e=>n.value=e)},null,8,["placeholder","modelValue"]),(0,i._)("ul",f,[(0,i._)("li",null,[(0,i.Wm)(r,{placeholder:e.$t("app.campaigns_list.filters.dungeon_master"),options:c.value.dungeonMasters,modelValue:u.value.dungeonMasterId,"onUpdate:modelValue":a[1]||(a[1]=e=>u.value.dungeonMasterId=e)},null,8,["placeholder","options","modelValue"])]),(0,i._)("li",null,[(0,i.Wm)(r,{placeholder:e.$t("app.campaigns_list.filters.status"),options:c.value.statuses,modelValue:u.value.status,"onUpdate:modelValue":a[2]||(a[2]=e=>u.value.status=e)},null,8,["placeholder","options","modelValue"])])])])]),(0,i._)("ul",g,[(0,i._)("li",_,[(0,i._)("span",h,(0,t.zw)(e.$t("app.campaigns_list.list.header.title")),1),(0,i._)("span",b,(0,t.zw)(e.$t("app.campaigns_list.list.header.dungeon_master")),1),(0,i._)("span",w,(0,t.zw)(e.$t("app.campaigns_list.list.header.last_game")),1),(0,i._)("span",N,(0,t.zw)(e.$t("app.campaigns_list.list.header.status")),1),V]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(y.value,(a=>((0,i.wg)(),(0,i.iD)("li",{key:a.id,class:"list border-b border-gray-200"},[(0,i._)("div",null,[(0,i._)("p",S,(0,t.zw)(a.title),1),(0,i._)("p",F,(0,t.zw)(a.description),1)]),(0,i._)("span",null,(0,t.zw)(a.dungeon_master.username),1),(0,i._)("span",null,(0,t.zw)(a.updated_at&&e.$d(new Date(a.updated_at))),1),(0,i.Wm)(m,{class:"secondary"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,t.zw)(e.$t(`common.statuses.${a.status}`)),1)])),_:2},1024),(0,i._)("div",j,[(0,i.Wm)(o,{class:"primary small"},{default:(0,i.w5)((()=>[(0,i.Wm)((0,s.SU)(l.Z),{class:"w-4 h-4"}),(0,i.Uk)(" "+(0,t.zw)(e.$t("app.campaigns_list.list.edit_action")),1)])),_:1})])])))),128))])],64)}}}),x=n(3744);const y=(0,x.Z)(O,[["__scopeId","data-v-30a9e80a"]]);var $=y},2450:function(e,a,n){"use strict";n.d(a,{Z:function(){return t}});var i=n(6252);function t(e,a){return(0,i.wg)(),(0,i.iD)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[(0,i._)("path",{d:"M2.695 14.763l-1.262 3.154a.5.5 0 00.65.65l3.155-1.262a4 4 0 001.343-.885L17.5 5.5a2.121 2.121 0 00-3-3L3.58 13.42a4 4 0 00-.885 1.343z"})])}}}]);
//# sourceMappingURL=app_campaigns.841c6879.js.map