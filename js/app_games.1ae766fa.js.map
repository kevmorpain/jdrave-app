{"version":3,"file":"js/app_games.1ae766fa.js","mappings":"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","sources":["webpack://jdrave-app/./src/views/games/GameCreation.vue?3420","webpack://jdrave-app/./src/views/games/GameCreation.vue","webpack://jdrave-app/./src/services/games/CreateGame.mutation.gql"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, unref as _unref, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"header\", { class: \"flex justify-between align-middle mb-8\" }, [\n  /*#__PURE__*/_createElementVNode(\"h1\", { class: \"page-title\" }, [\n    /*#__PURE__*/_createTextVNode(\"Cr√©ation de \"),\n    /*#__PURE__*/_createElementVNode(\"span\", null, \"campagne\")\n  ])\n], -1)\nconst _hoisted_2 = /*#__PURE__*/_createTextVNode(\"Valider\")\n\nimport { reactive } from 'vue';\nimport { useMutation } from '@vue/apollo-composable';\nimport { useRouter } from 'vue-router';\nimport CreateGame from '@/services/games/CreateGame.mutation.gql';\nimport { GET_GAMES } from '@/services/games';\n\n\nexport default /*#__PURE__*/_defineComponent({\n  setup(__props) {\n\nconst newGame = reactive<{\n  title: string;\n  description: string;\n}>({\n  title: '',\n  description: '',\n});\n\nconst { mutate: createGame, onDone: onCreationDone } = useMutation(\n  CreateGame,\n  () => ({\n    variables: {\n      ...newGame,\n    },\n    update: (cache, { data: { createGame } }) => {\n      const data = cache.readQuery({\n        query: GET_GAMES,\n      });\n      data.characters.push(createGame);\n      cache.writeQuery({ query: GET_GAMES, data });\n    },\n  })\n);\n\nconst router = useRouter();\nonCreationDone(({ data }): void => {\n  router.replace({\n    name: 'game',\n    params: {\n      gameId: data.game.id,\n    },\n  });\n});\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_BaseInput = _resolveComponent(\"BaseInput\")!\n  const _component_BaseTextarea = _resolveComponent(\"BaseTextarea\")!\n  const _component_BaseButton = _resolveComponent(\"BaseButton\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _hoisted_1,\n    _createElementVNode(\"div\", null, [\n      _createVNode(_component_BaseInput, {\n        class: \"mb-6\",\n        label: \"Titre\",\n        modelValue: _unref(newGame).title,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_unref(newGame).title) = $event))\n      }, null, 8, [\"modelValue\"]),\n      _createVNode(_component_BaseTextarea, {\n        class: \"col-span-full mb-6\",\n        label: \"Description\",\n        modelValue: _unref(newGame).description,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_unref(newGame).description) = $event))\n      }, null, 8, [\"modelValue\"]),\n      _createVNode(_component_BaseButton, {\n        class: \"primary\",\n        onClick: _unref(createGame)\n      }, {\n        default: _withCtx(() => [\n          _hoisted_2\n        ]),\n        _: 1\n      }, 8, [\"onClick\"])\n    ])\n  ], 64))\n}\n}\n\n})","import script from \"./GameCreation.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./GameCreation.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","\n    var doc = {\"kind\":\"Document\",\"definitions\":[{\"kind\":\"OperationDefinition\",\"operation\":\"mutation\",\"name\":{\"kind\":\"Name\",\"value\":\"CreateGame\"},\"variableDefinitions\":[{\"kind\":\"VariableDefinition\",\"variable\":{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"description\"}},\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"String\"}},\"directives\":[]},{\"kind\":\"VariableDefinition\",\"variable\":{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"title\"}},\"type\":{\"kind\":\"NonNullType\",\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"String\"}}},\"directives\":[]}],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"insert_games_one\"},\"arguments\":[{\"kind\":\"Argument\",\"name\":{\"kind\":\"Name\",\"value\":\"object\"},\"value\":{\"kind\":\"ObjectValue\",\"fields\":[{\"kind\":\"ObjectField\",\"name\":{\"kind\":\"Name\",\"value\":\"title\"},\"value\":{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"title\"}}},{\"kind\":\"ObjectField\",\"name\":{\"kind\":\"Name\",\"value\":\"description\"},\"value\":{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"description\"}}}]}}],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"description\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"title\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"id\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"created_at\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"dungeon_master\"},\"arguments\":[],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"id\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"username\"},\"arguments\":[],\"directives\":[]}]}}]}}]}}],\"loc\":{\"start\":0,\"end\":239}};\n    doc.loc.source = {\"body\":\"mutation CreateGame($description: String, $title: String!) {\\n  insert_games_one(object: {title: $title, description: $description}) {\\n    description\\n    title\\n    id\\n    created_at\\n    dungeon_master {\\n      id\\n      username\\n    }\\n  }\\n}\\n\",\"name\":\"GraphQL request\",\"locationOffset\":{\"line\":1,\"column\":1}};\n  \n\n    var names = {};\n    function unique(defs) {\n      return defs.filter(\n        function(def) {\n          if (def.kind !== 'FragmentDefinition') return true;\n          var name = def.name.value\n          if (names[name]) {\n            return false;\n          } else {\n            names[name] = true;\n            return true;\n          }\n        }\n      )\n    }\n  \n\n    // Collect any fragment/type references from a node, adding them to the refs Set\n    function collectFragmentReferences(node, refs) {\n      if (node.kind === \"FragmentSpread\") {\n        refs.add(node.name.value);\n      } else if (node.kind === \"VariableDefinition\") {\n        var type = node.type;\n        if (type.kind === \"NamedType\") {\n          refs.add(type.name.value);\n        }\n      }\n\n      if (node.selectionSet) {\n        node.selectionSet.selections.forEach(function(selection) {\n          collectFragmentReferences(selection, refs);\n        });\n      }\n\n      if (node.variableDefinitions) {\n        node.variableDefinitions.forEach(function(def) {\n          collectFragmentReferences(def, refs);\n        });\n      }\n\n      if (node.definitions) {\n        node.definitions.forEach(function(def) {\n          collectFragmentReferences(def, refs);\n        });\n      }\n    }\n\n    var definitionRefs = {};\n    (function extractReferences() {\n      doc.definitions.forEach(function(def) {\n        if (def.name) {\n          var refs = new Set();\n          collectFragmentReferences(def, refs);\n          definitionRefs[def.name.value] = refs;\n        }\n      });\n    })();\n\n    function findOperation(doc, name) {\n      for (var i = 0; i < doc.definitions.length; i++) {\n        var element = doc.definitions[i];\n        if (element.name && element.name.value == name) {\n          return element;\n        }\n      }\n    }\n\n    function oneQuery(doc, operationName) {\n      // Copy the DocumentNode, but clear out the definitions\n      var newDoc = {\n        kind: doc.kind,\n        definitions: [findOperation(doc, operationName)]\n      };\n      if (doc.hasOwnProperty(\"loc\")) {\n        newDoc.loc = doc.loc;\n      }\n\n      // Now, for the operation we're running, find any fragments referenced by\n      // it or the fragments it references\n      var opRefs = definitionRefs[operationName] || new Set();\n      var allRefs = new Set();\n      var newRefs = new Set();\n\n      // IE 11 doesn't support \"new Set(iterable)\", so we add the members of opRefs to newRefs one by one\n      opRefs.forEach(function(refName) {\n        newRefs.add(refName);\n      });\n\n      while (newRefs.size > 0) {\n        var prevRefs = newRefs;\n        newRefs = new Set();\n\n        prevRefs.forEach(function(refName) {\n          if (!allRefs.has(refName)) {\n            allRefs.add(refName);\n            var childRefs = definitionRefs[refName] || new Set();\n            childRefs.forEach(function(childRef) {\n              newRefs.add(childRef);\n            });\n          }\n        });\n      }\n\n      allRefs.forEach(function(refName) {\n        var op = findOperation(doc, refName);\n        if (op) {\n          newDoc.definitions.push(op);\n        }\n      });\n\n      return newDoc;\n    }\n    \n    module.exports = doc;\n    \n        module.exports[\"CreateGame\"] = oneQuery(doc, \"CreateGame\");\n        \n"],"names":["_hoisted_1","_","class","_hoisted_2","setup","__props","newGame","title","description","mutate","createGame","onDone","onCreationDone","variables","update","cache","data","readQuery","query","characters","push","writeQuery","router","replace","name","params","gameId","game","id","_ctx","_cache","_component_BaseInput","_component_BaseTextarea","_component_BaseButton","label","modelValue","$event","onClick","default","__exports__","doc","loc","source","collectFragmentReferences","node","refs","kind","add","value","type","selectionSet","selections","forEach","selection","variableDefinitions","def","definitions","definitionRefs","findOperation","i","length","element","oneQuery","operationName","newDoc","hasOwnProperty","opRefs","Set","allRefs","newRefs","refName","size","prevRefs","has","childRefs","childRef","op","module","exports"],"sourceRoot":""}