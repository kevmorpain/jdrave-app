(self["webpackChunkjdrave_app"]=self["webpackChunkjdrave_app"]||[]).push([[839],{403:function(e){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Object"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"objectId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"uuid"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"object"},name:{kind:"Name",value:"objects_by_pk"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"objectId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"kind"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"picture_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_be_equipped"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"games"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:233}};n.loc.source={body:"query Object ($objectId: uuid!) {\n  object: objects_by_pk(id: $objectId) {\n    id\n    name\n    kind\n    picture_url\n    status\n    description\n    can_be_equipped\n    games {\n      game {\n        id\n        title\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function i(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var a=e.type;"NamedType"===a.kind&&n.add(a.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){i(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){i(e,n)})),e.definitions&&e.definitions.forEach((function(e){i(e,n)}))}var a={};function t(e,n){for(var i=0;i<e.definitions.length;i++){var a=e.definitions[i];if(a.name&&a.name.value==n)return a}}function l(e,n){var i={kind:e.kind,definitions:[t(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var l=a[n]||new Set,d=new Set,s=new Set;l.forEach((function(e){s.add(e)}));while(s.size>0){var u=s;s=new Set,u.forEach((function(e){if(!d.has(e)){d.add(e);var n=a[e]||new Set;n.forEach((function(e){s.add(e)}))}}))}return d.forEach((function(n){var a=t(e,n);a&&i.definitions.push(a)})),i}(function(){n.definitions.forEach((function(e){if(e.name){var n=new Set;i(e,n),a[e.name.value]=n}}))})(),e.exports=n,e.exports.Object=l(n,"Object")},6696:function(e){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Objects"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"kind"}},type:{kind:"NamedType",name:{kind:"Name",value:"object_kind_enum"}},defaultValue:{kind:"NullValue"},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"status"}},type:{kind:"NamedType",name:{kind:"Name",value:"statuses_enum"}},defaultValue:{kind:"NullValue"},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"objects"},arguments:[{kind:"Argument",name:{kind:"Name",value:"where"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"kind"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"_eq"},value:{kind:"Variable",name:{kind:"Name",value:"kind"}}}]}},{kind:"ObjectField",name:{kind:"Name",value:"status"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"_eq"},value:{kind:"Variable",name:{kind:"Name",value:"status"}}}]}}]}},{kind:"Argument",name:{kind:"Name",value:"order_by"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"name_ignore_accent"},value:{kind:"EnumValue",value:"asc"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"kind"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"picture_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updated_at"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"games"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:319}};n.loc.source={body:"query Objects ($kind: object_kind_enum = null, $status: statuses_enum = null) {\n  objects(where: {kind: {_eq: $kind}, status: {_eq: $status}}, order_by: {name_ignore_accent: asc}) {\n    id\n    name\n    kind\n    picture_url\n    status\n    updated_at\n    games {\n      game {\n        id\n        title\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function i(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var a=e.type;"NamedType"===a.kind&&n.add(a.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){i(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){i(e,n)})),e.definitions&&e.definitions.forEach((function(e){i(e,n)}))}var a={};function t(e,n){for(var i=0;i<e.definitions.length;i++){var a=e.definitions[i];if(a.name&&a.name.value==n)return a}}function l(e,n){var i={kind:e.kind,definitions:[t(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var l=a[n]||new Set,d=new Set,s=new Set;l.forEach((function(e){s.add(e)}));while(s.size>0){var u=s;s=new Set,u.forEach((function(e){if(!d.has(e)){d.add(e);var n=a[e]||new Set;n.forEach((function(e){s.add(e)}))}}))}return d.forEach((function(n){var a=t(e,n);a&&i.definitions.push(a)})),i}(function(){n.definitions.forEach((function(e){if(e.name){var n=new Set;i(e,n),a[e.name.value]=n}}))})(),e.exports=n,e.exports.Objects=l(n,"Objects")},9273:function(e){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UpdateObject"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"uuid"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"object"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"objects_set_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"update_objects_by_pk"},arguments:[{kind:"Argument",name:{kind:"Name",value:"pk_columns"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}]}},{kind:"Argument",name:{kind:"Name",value:"_set"},value:{kind:"Variable",name:{kind:"Name",value:"object"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"kind"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"picture_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_be_equipped"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:223}};n.loc.source={body:"mutation UpdateObject ($id: uuid!, $object: objects_set_input!) {\n  update_objects_by_pk(pk_columns: {id: $id}, _set: $object) {\n    id\n    name\n    kind\n    picture_url\n    status\n    description\n    can_be_equipped\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function i(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var a=e.type;"NamedType"===a.kind&&n.add(a.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){i(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){i(e,n)})),e.definitions&&e.definitions.forEach((function(e){i(e,n)}))}var a={};function t(e,n){for(var i=0;i<e.definitions.length;i++){var a=e.definitions[i];if(a.name&&a.name.value==n)return a}}function l(e,n){var i={kind:e.kind,definitions:[t(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var l=a[n]||new Set,d=new Set,s=new Set;l.forEach((function(e){s.add(e)}));while(s.size>0){var u=s;s=new Set,u.forEach((function(e){if(!d.has(e)){d.add(e);var n=a[e]||new Set;n.forEach((function(e){s.add(e)}))}}))}return d.forEach((function(n){var a=t(e,n);a&&i.definitions.push(a)})),i}(function(){n.definitions.forEach((function(e){if(e.name){var n=new Set;i(e,n),a[e.name.value]=n}}))})(),e.exports=n,e.exports.UpdateObject=l(n,"UpdateObject")},5050:function(e,n,i){"use strict";var a;i.d(n,{m:function(){return a}}),function(e){e["Weapon"]="weapon",e["Armor"]="armor",e["Usable"]="usable",e["Edible"]="edible",e["Special"]="special"}(a||(a={}))},3258:function(e,n,i){"use strict";i.d(n,{Z:function(){return o}});var a=i(6252);const t={class:"bg-white rounded-lg p-5 shadow-sm"};function l(e,n){return(0,a.wg)(),(0,a.iD)("div",t,[(0,a.WI)(e.$slots,"default")])}var d=i(3744);const s={},u=(0,d.Z)(s,[["render",l]]);var o=u},6899:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return y}});i(2801),i(1295);var a=i(6252),t=i(2262),l=i(3577),d=i(3258),s=i(4356),u=i(9150),o=i(9316),r=i(9273),c=i.n(r),m=i(403),v=i.n(m);const k={key:0},f={class:"flex gap-4 flex-wrap"},p={class:"flex-none max-w-[300px] w-full flex flex-col gap-2 items-center"},b=["src"],_={class:"flex-1 flex flex-col gap-4"},g={class:"flex gap-4 flex-wrap"},j={class:"flex-1"},N=(0,a._)("p",null,"Campagne",-1),w={class:"mt-4 flex justify-end"};var h=(0,a.aZ)({__name:"ObjectPage",props:{objectId:{}},setup(e){const n=e,{tm:i}=(0,u.QT)(),{onResult:r,loading:m}=(0,o.aM)(v(),(()=>({objectId:n.objectId}))),h=(0,t.iH)(void 0);r((e=>{e.data?.object&&(h.value=structuredClone(e.data.object))}));const S=i("common.object_kinds"),{uploadImage:y}=(0,s.Rg)(),V=(0,t.iH)(null),F=()=>{V.value?.click()},x=async e=>{const n=e.target.files?.[0];if(n&&h.value){const{url:e}=await y(n,s.nx.Objects);h.value.picture_url=e}},O=()=>{D()},{mutate:D,loading:E}=(0,o.Db)(c(),(()=>{if(h.value){const{id:e,__typename:n,games:i,...a}=h.value;return{variables:{id:e,object:a}}}return{}}));return(e,n)=>{const i=(0,a.up)("BaseButton"),s=(0,a.up)("BaseInput"),u=(0,a.up)("BaseSelect"),o=(0,a.up)("BaseBadge"),r=(0,a.up)("BaseTextarea");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,t.SU)(m)?((0,a.wg)(),(0,a.iD)("div",k,"Chargement...")):(0,a.kq)("",!0),h.value?((0,a.wg)(),(0,a.j4)(d.Z,{key:1},{default:(0,a.w5)((()=>[(0,a._)("div",f,[(0,a._)("div",p,[(0,a._)("img",{src:h.value.picture_url,class:"h-[300px] w-full rounded-lg bg-zinc-300 object-cover object-center"},null,8,b),(0,a.Wm)(i,{class:"secondary",onClick:F},{default:(0,a.w5)((()=>[(0,a.Uk)(" Changer l'image ")])),_:1}),(0,a._)("input",{ref_key:"pictureInputRef",ref:V,class:"hidden",type:"file",onChange:x},null,544)]),(0,a._)("div",_,[(0,a._)("div",g,[(0,a.Wm)(s,{class:"flex-1",label:"Nom",modelValue:h.value.name,"onUpdate:modelValue":n[0]||(n[0]=e=>h.value.name=e)},null,8,["modelValue"]),(0,a.Wm)(u,{class:"flex-1",label:e.$t("app.create_modal.steps.object.fields.kind"),options:(0,t.SU)(S),modelValue:h.value.kind,"onUpdate:modelValue":n[1]||(n[1]=e=>h.value.kind=e)},null,8,["label","options","modelValue"]),(0,a._)("div",j,[N,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(h.value.games,(({game:e})=>((0,a.wg)(),(0,a.j4)(o,{key:e.id,class:"primary"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(e.title),1)])),_:2},1024)))),128))])]),(0,a.Wm)(r,{label:"Description",modelValue:h.value.description,"onUpdate:modelValue":n[2]||(n[2]=e=>h.value.description=e)},null,8,["modelValue"])])]),(0,a._)("div",w,[(0,a.Wm)(i,{class:"primary","is-loading":(0,t.SU)(E),onClick:O},{default:(0,a.w5)((()=>[(0,a.Uk)(" Enregistrer les modifications ")])),_:1},8,["is-loading"])])])),_:1})):(0,a.kq)("",!0)],64)}}});const S=h;var y=S},5417:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return u}});var a=i(6252);function t(e,n){const i=(0,a.up)("RouterView");return(0,a.wg)(),(0,a.j4)(i)}var l=i(3744);const d={},s=(0,l.Z)(d,[["render",t]]);var u=s},4369:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return O}});var a=i(6252),t=i(3577),l=i(2262),d=i(2450),s=i(9150),u=i(9316),o=i(6696),r=i.n(o),c=i(5050),m=i(4628);const v=e=>((0,a.dD)("data-v-4f7a414d"),e=e(),(0,a.Cn)(),e),k={class:"mb-5"},f={class:"font-bold text-2xl mb-4"},p={class:"flex justify-between items-center gap-x-2"},b={class:"flex gap-x-4"},_={class:"-mx-9"},g={class:"list bg-gray-100 text-gray-600 uppercase font-semibold text-sm"},j=v((()=>(0,a._)("span",null,null,-1))),N={class:"list border-b border-gray-200"},w={class:"flex items-center gap-x-6"},h=["src"],S={class:"font-semibold"},y={class:"ml-auto"};var V=(0,a.aZ)({__name:"ObjectsList",setup(e){const{t:n}=(0,s.QT)(),i=(0,l.iH)(""),o=(0,l.iH)({kind:null,status:null}),v=(0,l.iH)({kinds:Object.entries(c.m).sort(((e,n)=>e[0].localeCompare(n[0]))).reduce(((e,[i,a])=>(e[a]=n(`common.object_kinds.${a}`),e)),{}),statuses:Object.entries(m.o).sort(((e,n)=>e[0].localeCompare(n[0]))).reduce(((e,[i,a])=>(e[a]=n(`common.statuses.${a}`),e)),{})}),{result:V}=(0,u.aM)(r(),o.value),F=(0,a.Fl)((()=>V.value?.objects??[]));return(e,n)=>{const s=(0,a.up)("BaseInput"),u=(0,a.up)("BaseDropdown"),r=(0,a.up)("BaseBadge"),c=(0,a.up)("BaseButton"),m=(0,a.up)("RouterLink");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("header",k,[(0,a._)("h1",f,(0,t.zw)(e.$t("app.objects_list.title")),1),(0,a._)("div",p,[(0,a.Wm)(s,{class:"w-full max-w-[400px]",type:"text",placeholder:e.$t("app.objects_list.search_placeholder"),modelValue:i.value,"onUpdate:modelValue":n[0]||(n[0]=e=>i.value=e)},null,8,["placeholder","modelValue"]),(0,a._)("ul",b,[(0,a._)("li",null,[(0,a.Wm)(u,{placeholder:e.$t("app.objects_list.filters.kind"),options:v.value.kinds,modelValue:o.value.kind,"onUpdate:modelValue":n[1]||(n[1]=e=>o.value.kind=e)},null,8,["placeholder","options","modelValue"])]),(0,a._)("li",null,[(0,a.Wm)(u,{placeholder:e.$t("app.objects_list.filters.status"),options:v.value.statuses,modelValue:o.value.status,"onUpdate:modelValue":n[2]||(n[2]=e=>o.value.status=e)},null,8,["placeholder","options","modelValue"])])])])]),(0,a._)("ul",_,[(0,a._)("li",g,[(0,a._)("span",null,(0,t.zw)(e.$t("app.objects_list.list.header.name")),1),(0,a._)("span",null,(0,t.zw)(e.$t("app.objects_list.list.header.games")),1),(0,a._)("span",null,(0,t.zw)(e.$t("app.objects_list.list.header.kind")),1),(0,a._)("span",null,(0,t.zw)(e.$t("app.objects_list.list.header.status")),1),j]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(F.value,(n=>((0,a.wg)(),(0,a.j4)(m,{key:n.id,custom:"",to:{name:"object_page",params:{objectId:n.id}}},{default:(0,a.w5)((({navigate:i})=>[(0,a._)("li",N,[(0,a._)("div",w,[(0,a._)("img",{class:"w-12 h-12 object-cover object-center rounded-full bg-gray-200",src:n.picture_url},null,8,h),(0,a._)("p",S,(0,t.zw)(n.name),1)]),(0,a._)("div",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.games,(({game:e})=>((0,a.wg)(),(0,a.iD)("span",{key:e.id,class:"text-primary"},(0,t.zw)(e.title),1)))),128))]),(0,a.Wm)(r,{class:"secondary justify-self-start"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,t.zw)(e.$t(`common.object_kinds.${n.kind}`)),1)])),_:2},1024),(0,a.Wm)(r,{class:"secondary"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,t.zw)(e.$t(`common.statuses.${n.status}`)),1)])),_:2},1024),(0,a._)("div",y,[(0,a.Wm)(c,{class:"primary small",onClick:i},{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(d.Z),{class:"w-4 h-4"}),(0,a.Uk)(" "+(0,t.zw)(e.$t("app.objects_list.list.edit_action")),1)])),_:2},1032,["onClick"])])])])),_:2},1032,["to"])))),128))])],64)}}}),F=i(3744);const x=(0,F.Z)(V,[["__scopeId","data-v-4f7a414d"]]);var O=x}}]);
//# sourceMappingURL=app_objects.ffe0757d.js.map