(self["webpackChunkjdrave_app"]=self["webpackChunkjdrave_app"]||[]).push([[839],{403:function(e){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Object"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"objectId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"uuid"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"object"},name:{kind:"Name",value:"objects_by_pk"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"objectId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"kind"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"picture_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_be_equipped"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"games"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:233}};n.loc.source={body:"query Object ($objectId: uuid!) {\n  object: objects_by_pk(id: $objectId) {\n    id\n    name\n    kind\n    picture_url\n    status\n    description\n    can_be_equipped\n    games {\n      game {\n        id\n        title\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function i(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var a=e.type;"NamedType"===a.kind&&n.add(a.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){i(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){i(e,n)})),e.definitions&&e.definitions.forEach((function(e){i(e,n)}))}var a={};function t(e,n){for(var i=0;i<e.definitions.length;i++){var a=e.definitions[i];if(a.name&&a.name.value==n)return a}}function l(e,n){var i={kind:e.kind,definitions:[t(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var l=a[n]||new Set,d=new Set,s=new Set;l.forEach((function(e){s.add(e)}));while(s.size>0){var u=s;s=new Set,u.forEach((function(e){if(!d.has(e)){d.add(e);var n=a[e]||new Set;n.forEach((function(e){s.add(e)}))}}))}return d.forEach((function(n){var a=t(e,n);a&&i.definitions.push(a)})),i}(function(){n.definitions.forEach((function(e){if(e.name){var n=new Set;i(e,n),a[e.name.value]=n}}))})(),e.exports=n,e.exports.Object=l(n,"Object")},6696:function(e){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Objects"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"kind"}},type:{kind:"NamedType",name:{kind:"Name",value:"object_kind_enum"}},defaultValue:{kind:"NullValue"},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"status"}},type:{kind:"NamedType",name:{kind:"Name",value:"statuses_enum"}},defaultValue:{kind:"NullValue"},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"objects"},arguments:[{kind:"Argument",name:{kind:"Name",value:"where"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"kind"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"_eq"},value:{kind:"Variable",name:{kind:"Name",value:"kind"}}}]}},{kind:"ObjectField",name:{kind:"Name",value:"status"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"_eq"},value:{kind:"Variable",name:{kind:"Name",value:"status"}}}]}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"kind"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"picture_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updated_at"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"games"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:282}};n.loc.source={body:"query Objects ($kind: object_kind_enum = null, $status: statuses_enum = null) {\n  objects(where: {kind: {_eq: $kind}, status: {_eq: $status}}) {\n    id\n    name\n    kind\n    picture_url\n    status\n    updated_at\n    games {\n      game {\n        id\n        title\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function i(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var a=e.type;"NamedType"===a.kind&&n.add(a.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){i(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){i(e,n)})),e.definitions&&e.definitions.forEach((function(e){i(e,n)}))}var a={};function t(e,n){for(var i=0;i<e.definitions.length;i++){var a=e.definitions[i];if(a.name&&a.name.value==n)return a}}function l(e,n){var i={kind:e.kind,definitions:[t(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var l=a[n]||new Set,d=new Set,s=new Set;l.forEach((function(e){s.add(e)}));while(s.size>0){var u=s;s=new Set,u.forEach((function(e){if(!d.has(e)){d.add(e);var n=a[e]||new Set;n.forEach((function(e){s.add(e)}))}}))}return d.forEach((function(n){var a=t(e,n);a&&i.definitions.push(a)})),i}(function(){n.definitions.forEach((function(e){if(e.name){var n=new Set;i(e,n),a[e.name.value]=n}}))})(),e.exports=n,e.exports.Objects=l(n,"Objects")},9273:function(e){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UpdateObject"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"uuid"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"object"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"objects_set_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"update_objects_by_pk"},arguments:[{kind:"Argument",name:{kind:"Name",value:"pk_columns"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}]}},{kind:"Argument",name:{kind:"Name",value:"_set"},value:{kind:"Variable",name:{kind:"Name",value:"object"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"kind"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"picture_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_be_equipped"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:223}};n.loc.source={body:"mutation UpdateObject ($id: uuid!, $object: objects_set_input!) {\n  update_objects_by_pk(pk_columns: {id: $id}, _set: $object) {\n    id\n    name\n    kind\n    picture_url\n    status\n    description\n    can_be_equipped\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function i(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var a=e.type;"NamedType"===a.kind&&n.add(a.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){i(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){i(e,n)})),e.definitions&&e.definitions.forEach((function(e){i(e,n)}))}var a={};function t(e,n){for(var i=0;i<e.definitions.length;i++){var a=e.definitions[i];if(a.name&&a.name.value==n)return a}}function l(e,n){var i={kind:e.kind,definitions:[t(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var l=a[n]||new Set,d=new Set,s=new Set;l.forEach((function(e){s.add(e)}));while(s.size>0){var u=s;s=new Set,u.forEach((function(e){if(!d.has(e)){d.add(e);var n=a[e]||new Set;n.forEach((function(e){s.add(e)}))}}))}return d.forEach((function(n){var a=t(e,n);a&&i.definitions.push(a)})),i}(function(){n.definitions.forEach((function(e){if(e.name){var n=new Set;i(e,n),a[e.name.value]=n}}))})(),e.exports=n,e.exports.UpdateObject=l(n,"UpdateObject")},4628:function(e,n,i){"use strict";var a;i.d(n,{o:function(){return a}}),function(e){e["Draft"]="draft",e["Published"]="published",e["Archived"]="archived"}(a||(a={}))},6899:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return y}});i(2801),i(1295);var a=i(6252),t=i(2262),l=i(3577),d=i(3258),s=i(9150),u=i(9316),o=i(9273),c=i.n(o),r=i(403),m=i.n(r),v=i(4356);const k={key:0},f={class:"flex gap-4 flex-wrap"},p={class:"flex-none max-w-[300px] w-full flex flex-col gap-2 items-center"},b=["src"],_={class:"flex-1 flex flex-col gap-4"},g={class:"flex gap-4 flex-wrap"},j={class:"flex-1"},w=(0,a._)("p",null,"Campagne",-1),h={class:"mt-4 flex justify-end"};var N=(0,a.aZ)({__name:"ObjectPage",props:{objectId:{}},setup(e){const n=e,{tm:i}=(0,s.QT)(),{onResult:o,loading:r}=(0,u.aM)(m(),(()=>({objectId:n.objectId}))),N=(0,t.iH)(void 0);o((e=>{e.data?.object&&(N.value=structuredClone(e.data.object))}));const S=i("common.object_kinds"),{uploadImage:y}=(0,v.R)(),V=(0,t.iH)(null),x=()=>{V.value?.click()},F=async e=>{const n=e.target.files?.[0];if(n&&N.value){const{url:e}=await y(n);N.value.picture_url=e}},D=()=>{O()},{mutate:O,loading:$}=(0,u.Db)(c(),(()=>{if(N.value){const{id:e,__typename:n,games:i,...a}=N.value;return{variables:{id:e,object:a}}}return{}}));return(e,n)=>{const i=(0,a.up)("BaseButton"),s=(0,a.up)("BaseInput"),u=(0,a.up)("BaseSelect"),o=(0,a.up)("BaseBadge"),c=(0,a.up)("BaseTextarea");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,t.SU)(r)?((0,a.wg)(),(0,a.iD)("div",k,"Chargement...")):(0,a.kq)("",!0),N.value?((0,a.wg)(),(0,a.j4)(d.Z,{key:1},{default:(0,a.w5)((()=>[(0,a._)("div",f,[(0,a._)("div",p,[(0,a._)("img",{src:N.value.picture_url,class:"max-h-[300px] w-full h-full rounded-lg bg-zinc-300 object-cover object-center"},null,8,b),(0,a.Wm)(i,{class:"secondary",onClick:x},{default:(0,a.w5)((()=>[(0,a.Uk)(" Changer l'image ")])),_:1}),(0,a._)("input",{ref_key:"pictureInputRef",ref:V,class:"hidden",type:"file",onChange:F},null,544)]),(0,a._)("div",_,[(0,a._)("div",g,[(0,a.Wm)(s,{class:"flex-1",label:"Nom",modelValue:N.value.name,"onUpdate:modelValue":n[0]||(n[0]=e=>N.value.name=e)},null,8,["modelValue"]),(0,a.Wm)(u,{class:"flex-1",label:e.$t("app.create_modal.steps.object.fields.kind"),options:(0,t.SU)(S),modelValue:N.value.kind,"onUpdate:modelValue":n[1]||(n[1]=e=>N.value.kind=e)},null,8,["label","options","modelValue"]),(0,a._)("div",j,[w,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(N.value.games,(({game:e})=>((0,a.wg)(),(0,a.j4)(o,{key:e.id},{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(e.title),1)])),_:2},1024)))),128))])]),(0,a.Wm)(c,{label:"Description",modelValue:N.value.description,"onUpdate:modelValue":n[2]||(n[2]=e=>N.value.description=e)},null,8,["modelValue"])])]),(0,a._)("div",h,[(0,a.Wm)(i,{class:"primary","is-loading":(0,t.SU)($),onClick:D},{default:(0,a.w5)((()=>[(0,a.Uk)(" Enregistrer les modifications ")])),_:1},8,["is-loading"])])])),_:1})):(0,a.kq)("",!0)],64)}}});const S=N;var y=S},5417:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return u}});var a=i(6252);function t(e,n){const i=(0,a.up)("RouterView");return(0,a.wg)(),(0,a.j4)(i)}var l=i(3744);const d={},s=(0,l.Z)(d,[["render",t]]);var u=s},3331:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return U}});var a=i(6252),t=i(3577),l=i(2262),d=i(2450),s=i(9150),u=i(9316),o=i(6696),c=i.n(o),r=i(5050),m=i(4628);const v=e=>((0,a.dD)("data-v-320c5514"),e=e(),(0,a.Cn)(),e),k={class:"mb-5"},f={class:"font-bold text-2xl mb-4"},p={class:"flex justify-between items-center gap-x-2"},b={class:"flex gap-x-4"},_={class:"-mx-9"},g={class:"list bg-gray-100 text-gray-600 uppercase font-semibold text-sm"},j={class:""},w={class:""},h={class:""},N={class:""},S=v((()=>(0,a._)("span",{class:""},null,-1))),y={class:"list border-b border-gray-200"},V={class:"flex items-center gap-x-6"},x=["src"],F={class:"font-semibold"},D={class:"ml-auto"};var O=(0,a.aZ)({__name:"ObjectsList",setup(e){const{t:n}=(0,s.QT)(),i=(0,l.iH)(""),o=(0,l.iH)({kind:null,status:null}),v=(0,l.iH)({kinds:Object.entries(r.m).sort(((e,n)=>e[0].localeCompare(n[0]))).reduce(((e,[i,a])=>(e[a]=n(`common.object_kinds.${a}`),e)),{}),statuses:Object.entries(m.o).sort(((e,n)=>e[0].localeCompare(n[0]))).reduce(((e,[i,a])=>(e[a]=n(`common.statuses.${a}`),e)),{})}),{result:O}=(0,u.aM)(c(),o.value),$=(0,a.Fl)((()=>O.value?.objects??[]));return(e,n)=>{const s=(0,a.up)("BaseInput"),u=(0,a.up)("BaseDropdown"),c=(0,a.up)("BaseBadge"),r=(0,a.up)("BaseButton"),m=(0,a.up)("RouterLink");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("header",k,[(0,a._)("h1",f,(0,t.zw)(e.$t("app.objects_list.title")),1),(0,a._)("div",p,[(0,a.Wm)(s,{class:"w-full max-w-[400px]",type:"text",placeholder:e.$t("app.objects_list.search_placeholder"),modelValue:i.value,"onUpdate:modelValue":n[0]||(n[0]=e=>i.value=e)},null,8,["placeholder","modelValue"]),(0,a._)("ul",b,[(0,a._)("li",null,[(0,a.Wm)(u,{placeholder:e.$t("app.objects_list.filters.kind"),options:v.value.kinds,modelValue:o.value.kind,"onUpdate:modelValue":n[1]||(n[1]=e=>o.value.kind=e)},null,8,["placeholder","options","modelValue"])]),(0,a._)("li",null,[(0,a.Wm)(u,{placeholder:e.$t("app.objects_list.filters.status"),options:v.value.statuses,modelValue:o.value.status,"onUpdate:modelValue":n[2]||(n[2]=e=>o.value.status=e)},null,8,["placeholder","options","modelValue"])])])])]),(0,a._)("ul",_,[(0,a._)("li",g,[(0,a._)("span",j,(0,t.zw)(e.$t("app.objects_list.list.header.name")),1),(0,a._)("span",w,(0,t.zw)(e.$t("app.objects_list.list.header.games")),1),(0,a._)("span",h,(0,t.zw)(e.$t("app.objects_list.list.header.kind")),1),(0,a._)("span",N,(0,t.zw)(e.$t("app.objects_list.list.header.status")),1),S]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)($.value,(n=>((0,a.wg)(),(0,a.j4)(m,{key:n.id,custom:"",to:{name:"object_page",params:{objectId:n.id}}},{default:(0,a.w5)((({navigate:i})=>[(0,a._)("li",y,[(0,a._)("div",V,[(0,a._)("img",{class:"w-12 h-12 object-cover object-center rounded-full bg-gray-200",src:n.picture_url},null,8,x),(0,a._)("p",F,(0,t.zw)(n.name),1)]),(0,a._)("div",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.games,(({game:e})=>((0,a.wg)(),(0,a.iD)("span",{key:e.id,class:"text-primary"},(0,t.zw)(e.title),1)))),128))]),(0,a.Wm)(c,{class:"secondary justify-self-start"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,t.zw)(e.$t(`common.object_kinds.${n.kind}`)),1)])),_:2},1024),(0,a.Wm)(c,{class:"secondary"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,t.zw)(e.$t(`common.statuses.${n.status}`)),1)])),_:2},1024),(0,a._)("div",D,[(0,a.Wm)(r,{class:"primary small",onClick:i},{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(d.Z),{class:"w-4 h-4"}),(0,a.Uk)(" "+(0,t.zw)(e.$t("app.objects_list.list.edit_action")),1)])),_:2},1032,["onClick"])])])])),_:2},1032,["to"])))),128))])],64)}}}),$=i(3744);const E=(0,$.Z)(O,[["__scopeId","data-v-320c5514"]]);var U=E},2450:function(e,n,i){"use strict";i.d(n,{Z:function(){return t}});var a=i(6252);function t(e,n){return(0,a.wg)(),(0,a.iD)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[(0,a._)("path",{d:"M2.695 14.763l-1.262 3.154a.5.5 0 00.65.65l3.155-1.262a4 4 0 001.343-.885L17.5 5.5a2.121 2.121 0 00-3-3L3.58 13.42a4 4 0 00-.885 1.343z"})])}}}]);
//# sourceMappingURL=app_objects.d9da56a1.js.map